{"version":3,"sources":["helper/api.ts","Components/Comment.tsx","Components/Post.tsx","Components/PostList.tsx","Components/Filter.tsx","App.tsx","index.tsx"],"names":["getAll","url","fetch","then","response","json","CommentCard","name","body","className","src","alt","PostCard","title","user","commentList","map","comment","key","id","PostList","visiblePost","post","Filter","handleSearch","value","onChange","type","placeholder","App","postsSearch","termSearch","useState","posts","setPost","isLoading","setIsLoading","isLoaded","setIsLoaded","errorMessage","setErrorMessage","filterValue","setFilterValue","setValue","handleLoadClick","a","postsFromServer","usersFromServer","commentsFromServer","completedPost","find","userId","filter","postId","setTermWithDebounce","useCallback","f","delay","timerId","clearTimeout","setTimeout","debounce","length","toLowerCase","includes","e","target","onClick","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1b5dab35.chunk.js","sourcesContent":["const API_URL = 'https://jsonplaceholder.typicode.com';\n\ninterface User {\n  id: number;\n  name: string;\n}\n\nexport interface Comment {\n  id: number;\n  postId: number;\n  name: string;\n  body: string;\n}\n\nexport interface Post {\n  id: number;\n  userId: number;\n  title: string;\n  body: string;\n  user?: User;\n  commentList?: Comment[];\n}\n\nconst getAll = <E>(url: string): Promise<E[]> => {\n  return fetch(API_URL + url)\n    .then(response => response.json());\n};\n\nexport const debounce = (f: React.Dispatch<React.SetStateAction<string>>, delay: number) => {\n  let timerId: ReturnType<typeof setTimeout>;\n\n  return (value: string) => {\n    clearTimeout(timerId);\n    timerId = setTimeout(() => {\n      f(value);\n    }, delay);\n  };\n};\n\nexport const getUsers = () => getAll<User>('/users');\n\nexport const getPosts = () => getAll<Post>('/posts');\n\nexport const getComments = () => getAll<Comment>('/comments');\n","import React from 'react';\nimport { Comment } from '../helper/api';\n\n\nexport const CommentCard = ({ name, body }: Comment) => (\n  <div className=\"comment\">\n    <div className=\"commentator-panel\">\n      <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PHN0eWxlPi5zdDEyM3tmaWxsOiNkZmUzZTh9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfM18xXyI+PHBhdGggY2xhc3M9InN0MTIzIiBkPSJNMjAgMmM5LjkyNSAwIDE4IDguMDc1IDE4IDE4cy04LjA3NSAxOC0xOCAxOFMyIDI5LjkyNSAyIDIwIDEwLjA3NSAyIDIwIDJtMC0yQzguOTU0IDAgMCA4Ljk1NCAwIDIwczguOTU0IDIwIDIwIDIwIDIwLTguOTU0IDIwLTIwUzMxLjA0NiAwIDIwIDB6Ii8+PGNpcmNsZSBjbGFzcz0ic3QxMjMiIGN4PSIyMCIgY3k9IjE1LjMzMyIgcj0iOS4zMjYiLz48cGF0aCBjbGFzcz0ic3QxMjMiIGQ9Ik0yMCA0MGM1Ljg5MiAwIDExLjE3Mi0yLjU2MyAxNC44MzItNi42MTdhMTUuNDYxIDE1LjQ2MSAwIDAwLTcuMDU5LTkuMDk0QzI1LjY5IDI2LjEgMjIuOTc2IDI3LjIwMiAyMCAyNy4yMDJzLTUuNjktMS4xMDMtNy43NzMtMi45MTNhMTUuNDYxIDE1LjQ2MSAwIDAwLTcuMDU5IDkuMDk0QzguODI4IDM3LjQzNyAxNC4xMDggNDAgMjAgNDB6Ii8+PC9nPjwvc3ZnPg==\" alt=\"\" />\n      <div className=\"comment-name\">{name}</div>\n    </div>\n    <div>{body}</div>\n  </div>\n);\n","import React from 'react';\nimport { Post } from '../helper/api';\nimport { CommentCard } from './Comment';\n\n\nexport const PostCard = ({\n  title, user, body, commentList,\n}: Post) => (\n  <div className=\"blog-post\">\n    <h3>{title}</h3>\n    <p className=\"user text-primary\">{user ? user.name : 'Unknown'}</p>\n    <p className=\"blog-body\">{body}</p>\n    <div className=\"comment-list\">\n      {commentList ? (commentList.map(comment => (\n        <CommentCard key={comment.id} {...comment} />\n      ))\n      ) : null}\n    </div>\n  </div>\n);\n","import React from 'react';\nimport { PostCard } from './Post';\nimport { Post } from '../helper/api';\n\ninterface Props {\n  visiblePost: Post[];\n}\n\nexport const PostList = ({ visiblePost }: Props) => (\n  <div>\n    {visiblePost.map(post => (\n      <PostCard key={post.id} {...post} />\n    ))}\n  </div>\n);\n","import React from 'react';\n\ninterface FilterProps {\n  handleSearch: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  value: string;\n}\n\nexport const Filter = ({ handleSearch, value }: FilterProps) => (\n  <div className=\"form-group\">\n    <input\n      onChange={handleSearch}\n      value={value}\n      className=\"form-control form-control-lg\"\n      type=\"text\"\n      placeholder=\"Find post...\"\n    />\n  </div>\n);\n","import React, { useState, useCallback } from 'react';\nimport './App.css';\nimport {\n  getUsers, getPosts, getComments, Post, debounce\n} from './helper/api';\nimport { PostList } from './Components/PostList';\nimport { Filter } from './Components/Filter';\n\nconst App = () => {\n  const [posts, setPost] = useState<Post[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [filterValue, setFilterValue] = useState('');\n  const [value, setValue] = useState('');\n\n  const handleLoadClick = async () => {\n    setIsLoading(true);\n    try {\n      const postsFromServer = await getPosts();\n      const usersFromServer = await getUsers();\n      const commentsFromServer = await getComments();\n\n\n      const completedPost = postsFromServer.map(post => ({\n        ...post,\n        user: usersFromServer.find(user => user.id === post.userId),\n        commentList: commentsFromServer.filter(comment => comment.postId === post.id),\n      }));\n\n      setPost(completedPost);\n      setIsLoaded(true);\n    } catch (e) {\n      setErrorMessage('loading error, please try again later');\n    }\n\n    setIsLoading(false);\n  };\n\n  const setTermWithDebounce = useCallback(\n    debounce(setFilterValue, 1000), []\n  )\n\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n    setTermWithDebounce(e.target.value);\n  };\n\n\n  const searchBlog = (postsSearch: Post[], termSearch: string) => {\n    if (filterValue.length === 0) {\n      return postsSearch;\n    }\n\n    return postsSearch.filter(post => {\n      const bodyNormalize = post.body.toLowerCase();\n      const titleNormalize = post.title.toLowerCase();\n      return (bodyNormalize + titleNormalize).includes(termSearch.toLowerCase())\n    })\n  };\n\n  const visiblePost = searchBlog(posts, filterValue);\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"text-center\">Dynamic list of posts</h1>\n\n      {!isLoaded ? (\n        <div className=\"text-center\">\n          <button type=\"button\" className=\"btn btn-primary\" onClick={handleLoadClick}>\n            {isLoading && 'Loading...'}\n            {!isLoading && 'Load'}\n          </button>\n          {errorMessage && <p className=\"text-danger\">{errorMessage}</p>}\n        </div>\n      ) : (\n        posts.length > 0 ? (\n          <>\n            <Filter handleSearch={handleSearch} value={value} />\n            <PostList visiblePost={visiblePost} />\n          </>\n        )\n          : (<div className=\"text-center\">No posts yet</div>)\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}